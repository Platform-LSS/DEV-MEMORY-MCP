{{define "_memory_list.html"}}
{{if .Memories}}
<div class="space-y-3">
  {{range .Memories}}
  <div id="memory-{{.ID}}" class="bg-zinc-900 border border-zinc-800 rounded-xl p-5 hover:border-zinc-700 transition-colors">
    <div class="flex items-center justify-between mb-2">
      <div class="flex items-center gap-2">
        <span class="px-2 py-0.5 bg-emerald-500/10 text-emerald-400 text-xs rounded">{{.Topic}}</span>
        <span class="text-sm font-semibold text-zinc-200">{{.Key}}</span>
      </div>
      <div class="flex items-center gap-2">
        <button hx-get="/api/memories/edit/{{.ID}}" hx-target="#memory-{{.ID}}" hx-swap="outerHTML"
                class="p-1.5 text-zinc-500 hover:text-brand-400 rounded hover:bg-zinc-800 transition-colors" title="Edit">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
        </button>
        <button hx-delete="/api/memories/{{.ID}}" hx-target="#memory-{{.ID}}" hx-swap="outerHTML"
                hx-confirm="Delete this memory?"
                class="p-1.5 text-zinc-500 hover:text-red-400 rounded hover:bg-zinc-800 transition-colors" title="Delete">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
        </button>
      </div>
    </div>
    <p class="text-sm text-zinc-400 whitespace-pre-wrap">{{.Value}}</p>
    <div class="mt-2 text-xs text-zinc-600">
      {{timeAgo .UpdatedAt}} &middot; {{.ProjectID}}
    </div>
  </div>
  {{end}}
</div>
{{else}}
<p class="text-zinc-500 p-4">No memories found</p>
{{end}}
{{end}}

{{define "_memory_card"}}
<div id="memory-{{.Memory.ID}}" class="bg-zinc-900 border border-zinc-800 rounded-xl p-5 hover:border-zinc-700 transition-colors">
  <div class="flex items-center justify-between mb-2">
    <div class="flex items-center gap-2">
      <span class="px-2 py-0.5 bg-emerald-500/10 text-emerald-400 text-xs rounded">{{.Memory.Topic}}</span>
      <span class="text-sm font-semibold text-zinc-200">{{.Memory.Key}}</span>
    </div>
    <div class="flex items-center gap-2">
      <button hx-get="/api/memories/edit/{{.Memory.ID}}" hx-target="#memory-{{.Memory.ID}}" hx-swap="outerHTML"
              class="p-1.5 text-zinc-500 hover:text-brand-400 rounded hover:bg-zinc-800 transition-colors" title="Edit">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M11 5H6a2 2 0 00-2 2v11a2 2 0 002 2h11a2 2 0 002-2v-5m-1.414-9.414a2 2 0 112.828 2.828L11.828 15H9v-2.828l8.586-8.586z"/></svg>
      </button>
      <button hx-delete="/api/memories/{{.Memory.ID}}" hx-target="#memory-{{.Memory.ID}}" hx-swap="outerHTML"
              hx-confirm="Delete this memory?"
              class="p-1.5 text-zinc-500 hover:text-red-400 rounded hover:bg-zinc-800 transition-colors" title="Delete">
        <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24"><path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16"/></svg>
      </button>
    </div>
  </div>
  <p class="text-sm text-zinc-400 whitespace-pre-wrap">{{.Memory.Value}}</p>
  <div class="mt-2 text-xs text-zinc-600">
    {{timeAgo .Memory.UpdatedAt}} &middot; {{.Memory.ProjectID}}
  </div>
</div>
{{end}}
